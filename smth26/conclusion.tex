%-------------------------------------------------------------------------------
\section{Conclusion}
%-------------------------------------------------------------------------------

This work shows that current isolation systems like Kubernetes are unable to
effectively performance isolate between LC and BE workloads for workloads that
are CPU-intensive. We trace this problem down to Linux's \cgroups{}, and show
that because Linux uses per-core runqueues, its weight-based interface for
isolation is not enforced across cores. Using a weight-based interface for
isolating LC and BE has other problems as well: it makes it hard to enforce a
split across cores, and it interacts poorly with the large scheduling quantum
that Linux uses.

Instead, we propose an API that separates BEs from LCs by introducing the
\beclass{} class. Enforcing \beclass{} requires less synchronization than a
weight-based isolation approach, and ensures that no BE is ever running when an
LC is queued. During high load this requires `parking', which enforces that BEs
are immediately runnable once the load goes down, with minimal interference for
LCs in the meantime while the load is high.

We implement this categorical split in Linux, and show that the resulting
\schedbe{} allows \cgroups{} itself, as well as higher level applications that
build on \cgroups{} like Kubernetes, to do a better job of isolating LC from BE
workloads. Using \schedbe{} rather than the standard \cgroups{} weight interface
decrease the impact starting a BE process has on LC latencies from >2x to 0, and
under high load a parked \schedbe{} process running in a Kubernetes pod can
resume execution normally after multiple minutes of no user space CPU time.

