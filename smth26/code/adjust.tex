\begin{Verbatim}[commandchars=\\\{\},numbers=left,firstnumber=1,stepnumber=1,codes={\catcode`\$=3\catcode`\^=7\catcode`\_=8\relax},fontsize=\scriptsize,numbersep=6pt,xleftmargin=0.2in]
\PY{k+kt}{void}\PY{+w}{ }\PY{n+nf}{grp\PYZus{}adjust\PYZus{}vruntime}\PY{p}{(}\PY{k}{struct}\PY{+w}{ }\PY{n+nc}{global\PYZus{}heap}\PY{+w}{ }\PY{o}{*}\PY{n}{gh}\PY{p}{,}\PY{+w}{ }\PY{k}{struct}\PY{+w}{ }\PY{n+nc}{process}\PY{+w}{ }\PY{o}{*}\PY{n}{p}\PY{p}{,}\PY{+w}{ }\PY{n}{t\PYZus{}t}\PY{+w}{ }\PY{n}{time\PYZus{}passed}\PY{p}{)}\PY{+w}{ }\PY{p}{\PYZob{}}
\PY{+w}{  }\PY{n}{vt\PYZus{}t}\PY{+w}{ }\PY{n}{vt}\PY{+w}{ }\PY{o}{=}\PY{+w}{ }\PY{n}{calc\PYZus{}delta}\PY{p}{(}\PY{n}{time\PYZus{}passed}\PY{p}{,}\PY{+w}{ }\PY{n}{p}\PY{o}{\PYZhy{}}\PY{o}{\PYZgt{}}\PY{n}{he}\PY{p}{.}\PY{n}{weight}\PY{p}{)}\PY{p}{;}
\PY{+w}{  }\PY{n}{vt\PYZus{}t}\PY{+w}{ }\PY{n}{wvt}\PY{+w}{ }\PY{o}{=}\PY{+w}{ }\PY{n}{calc\PYZus{}delta}\PY{p}{(}\PY{n}{gh}\PY{o}{\PYZhy{}}\PY{o}{\PYZgt{}}\PY{n}{tick\PYZus{}length}\PY{p}{,}\PY{+w}{ }\PY{n}{p}\PY{o}{\PYZhy{}}\PY{o}{\PYZgt{}}\PY{n}{he}\PY{p}{.}\PY{n}{weight}\PY{p}{)}\PY{p}{;}
\PY{+w}{  }\PY{k}{if}\PY{+w}{ }\PY{p}{(}\PY{n}{wvt}\PY{+w}{ }\PY{o}{\PYZgt{}}\PY{+w}{ }\PY{n}{vt}\PY{p}{)}\PY{+w}{ }\PY{p}{\PYZob{}}
\PY{+w}{    }\PY{n}{atomic\PYZus{}fetch\PYZus{}add}\PY{p}{(}\PY{o}{\PYZam{}}\PY{n}{p}\PY{o}{\PYZhy{}}\PY{o}{\PYZgt{}}\PY{n}{group}\PY{o}{\PYZhy{}}\PY{o}{\PYZgt{}}\PY{n}{vruntime}\PY{p}{,}\PY{+w}{ }\PY{o}{\PYZhy{}}\PY{p}{(}\PY{n}{wvt}\PY{o}{\PYZhy{}}\PY{n}{vt}\PY{p}{)}\PY{p}{)}\PY{p}{;}
\PY{+w}{  }\PY{p}{\PYZcb{}}
\PY{p}{\PYZcb{}}
\end{Verbatim}
